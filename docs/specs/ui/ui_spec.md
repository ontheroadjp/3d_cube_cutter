# ui_spec.md

Status: Active
Summary: 現行UIの仕様（サイドバー/ヘッダー/プリセット/設定/学習）を定義する。

# UI 仕様

## 1. 目的
- 立体切断シミュレーターのUI仕様を明文化し、実装と仕様のズレを防ぐ。
- 学習モード拡張やReact移行時の参照元とする。

---

## 2. レイアウト構成
- **ヘッダー**
  - 固定ヘッダー（タイトル + 選択数）。
  - サイドバー/パネルの開閉に応じて横幅が伸縮する。
- **サイドバー**
  - 左固定 64px。
  - 上部: アプリアイコン（立方体）。
  - 中段: モードアイコン（プリセット/学習/設定）。
  - 下段: アクション（切り取り反転/展開図/リセット）。
- **パネル**
  - サイドバー右側にスライドイン（幅 320px）。
  - 右上に閉じるボタン。
  - 開閉はアニメーション付き。
- **キャンバス**
  - サイドバー/パネルの開閉に合わせて右へ寄せ、立体を縮小・再配置する。

---

## 3. モード仕様
- **デフォルト状態**: 自由選択モードが基本。
- **起動時/リセット時**: 自由選択モードに戻る（サイドバーは閉じる）。
- **明示的な自由選択アイコンは存在しない**。
- モード切替はサイドバーアイコンで行い、同じアイコンの再クリックで閉じる。

---

## 4. パネル仕様

### 4.1 プリセット
- カテゴリ選択（`三角形` / `四角形` / `多角形` / `保存した図形`）。
- 既定カテゴリは三角形。
- 「今の図形を保存」ボタンで保存ダイアログを開く。
- 保存カテゴリはリスト表示（編集/適用/削除）。

### 4.2 学習
- 現状は「準備中」表示。
- 将来的に問題選択・解説ステップ・ヒント表示へ拡張。

### 4.3 設定
- タブ切替: `表示` / `立体図形`。
- 表示: 頂点ラベル/面ラベル/切断面/切断片/透明/辺ラベルモード。
- 立体図形: 辺長入力、立体のリサイズ。

---

## 5. アニメーション/スタイル
- サイドバー/パネルは ChatGPT HP に近い配色とシャドー。
- アイコンはSVGで統一。
- ヘッダーの伸縮速度はパネル開閉と同期する。
- 立体の拡大縮小とキャンバス移動はアニメーションで行う。

---

## 6. UI と Engine の接続
- UIは `globalThis.__engine` に依存する（詳細は `docs/architecture/engine_ui_contract.md`）。
- パネル開閉は `setPanelOpen(open)` で Engine に通知する。
- モード変更は `setMode(mode)` で通知する。

---

## 7. 既知の制約/留意点
- 展開図中は切断点・切断線が追従しないため非表示。
- 学習モードはUIのみ存在し、学習コンテンツは未実装。
