# expansion_of_structural_solid_objects

Status: Draft
Summary: 立体オブジェクトを構造主導（ObjectModel）に一本化するためのフェーズ計画。

## 目的
- 立体オブジェクトを構造主導（ObjectModel）に一本化する
- 座標ベース処理は表示/入力などの派生用途に限定する

## 背景
- 立体が「構造化ObjectModel」と「座標ベース表示オブジェクト」の2系統で併存している
- 切断/展開の正しさは面/辺/点の構造に依存するため、座標ベースの分岐は矛盾と誤差を生む

## ゴール
- ObjectModel が唯一の真実となり、描画/切断/展開は全て構造主導で動作する
- 切断結果（面/辺/点/隣接）は ObjectModel の更新として確定する
- 展開は ObjectModel の共有辺（ヒンジ）から機械的に回転できる

## 非ゴール
- 座標による判定・処理を復活させること
- ラベルや表示都合で構造を改変すること

## 基本方針
- 構造（面/辺/点/隣接）が真実
- 座標は表示・入力の派生値としてのみ利用
- ラベルは構造から導出し、処理判断には使わない

## フェーズ構成
### フェーズ1: 描画の構造化
- ObjectModel から描画メッシュを生成
- 旧表示経路を段階的に置換し、最終的に削除

### フェーズ2: 切断の構造化
- 切断は ObjectModel の面分割として実装
- 新しい面/辺/点/隣接を構造的に確定
- 旧座標ベース切断を廃止

### フェーズ3: 展開の構造化
- 共有辺（sharedEdgeIds）をヒンジとして回転を導出
- 展開用の別オブジェクト生成を廃止
- 切断前/後を同一ロジックで扱う

## 進行管理
- 上位Issue: #103
- フェーズIssue: #104（描画）, #105（切断）, #106（展開）
- 詳細タスク: #107〜#115

## テスト指針
- `npm run typecheck` をPR前に必須
- `npm test` をマージ前に必須
- 主要プリセットの切断/展開確認を行う

## リスクと検証
- 構造更新の不整合（隣接/辺/面の欠落）をテストで検出
- 展開の向きズレは「ヒンジ/基準軸の不整合」として原因を切り分ける
