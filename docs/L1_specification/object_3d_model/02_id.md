# 02 ID Specification (Non-Cube / Extensible)

本ドキュメントは、立方体前提を排し、任意の多面体へ拡張できるID形式を定義する。
互換性は考慮しない（本仕様を唯一の正とする）。

---

## 1. 基本ID形式

- VertexID: `V:<n>`（例: `V:0`, `V:12`）
- EdgeID: `E:<a>-<b>`（例: `E:0-10`, `E:12-105`）
- FaceID: `F:<v0>-<v1>-...-<vk>`（例: `F:0-1-2-3`）

---

## 2. SnapPointID形式

- Vertex: `V:<n>`
- Edge ratio: `E:<a>-<b>@<p>/<q>`
- Face center: `F:<v0>-<v1>-...-<vk>@center`

---

## 3. 正規化（Canonicalization）

### 3.1 EdgeID正規化
- 常に `a < b` を正とする
  例：`E:10-0` → `E:0-10`

### 3.2 Edge ratio正規化
- Edgeの向きが反転した場合、比率を `r -> 1-r` に変換する
  例：`E:10-0@1/4` → `E:0-10@3/4`
- 分数は既約分数にする
- 分母は常に正
- 分母ゼロは禁止

---

## 4. FaceIDの順序
- FaceIDは **Face.vertices(CCW)** の順序を保持する
- Faceの頂点列はソートしない（向きが崩れるため）

