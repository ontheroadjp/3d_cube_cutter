# vertex_labeling_spec.md

Status: Active
Summary: ユーザー指定ラベルと内部IDの両立ルールを定義する。

# 頂点ラベル設定仕様

## 1. 目的
ユーザーが頂点ラベルを自由に指定できるようにしつつ、
構造主体アーキテクチャの内部IDは固定のインデックスで維持する。

---

## 2. 基本方針
- **内部IDは固定**: `V:0`〜`V:7`
- **表示ラベルは可変**: UI 表示と教育解説用に差し替え可能
- **SnapPointIDは内部IDで保存**し、表示時のみラベル変換を行う

---

## 3. 表示ラベルの定義

```
interface VertexLabelMap {
  [vertexId: string]: string; // 例: { "V:0": "P", "V:1": "Q", ... }
}
```

- キーは必ず `V:0`〜`V:7`
- 値は UI 表示用の1-2文字を推奨

---

## 4. 入力フォーマット案

### 4.1 配列入力 (UI向け)
```
labels = ["P","Q","R","S","T","U","V","W"]
```

- インデックス順に `V:0`〜`V:7` へ割り当てる
- 未指定はデフォルト (A-H) にフォールバック

### 4.2 マップ入力 (内部設定向け)
```
labelMap = {
  "V:0": "P",
  "V:1": "Q",
  "V:2": "R",
  "V:3": "S",
  "V:4": "T",
  "V:5": "U",
  "V:6": "V",
  "V:7": "W"
}
```

---

## 5. バリデーション
- 8頂点すべてに割り当てる
- 重複は禁止
- 空文字は禁止
- 許可文字は英大文字を推奨（将来拡張で日本語も可）

---

## 6. 変換ルール

- **内部 → 表示**
  - `V:0` → `labelMap["V:0"]`
- **表示 → 内部**
  - `labelMap` の逆引きを作成し、ユーザー入力を変換

---

## 7. UI への組み込み
- 設定画面に「頂点ラベル設定」を追加
- 反映タイミングは「OK」/「適用」で一括更新
- 変更後も SnapPointID は不変

---

## 8. まとめ
- 構造IDは固定、表示ラベルは可変
- IDの安定性と教育的柔軟性を両立する
