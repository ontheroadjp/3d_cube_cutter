# AI エージェント向け指示

このリポジトリは構造化されたドキュメント運用を採用しています。
作業を開始する前に、必ず以下のルールに従ってください。

## 1. 権威ドキュメント（読み順）

以下を権威として必ず読むこと:

1. docs/README.md
   - ドキュメントの入口と読み順を定義する。

2. docs/documentation_policy.md
   - 文書分類・配置・更新ルールを定義する。
   - 特に tech/education 分離と L0–L4 の責務。

3. docs/workflow.md
   - Issue/ブランチ/PR/マージの作業手順を定義する。

4. docs/CURRENT.md（存在する場合）
   - 現在フェーズと直近の文脈を定義する。
   - これはログではなく現在地である。

## 2. ドキュメント構造ルール

- ドキュメントは物理的に分離される:
  - docs/technical/（技術的な正しさ、アーキテクチャ、仕様）
  - docs/education/（教育思想、学習目標、UI 制約）

- 教育的な理由を技術仕様に混ぜない。
- 実装詳細を教育ドキュメントに書かない。
- 他方の影響がある場合はリンクで参照し、内容の重複を避ける。

## 3. レイヤ責務（重要）

ドキュメントのレイヤを必ず守ること:

- L0（Foundations）: 思想/アーキテクチャ/制約（進捗・計画は禁止）
- L1（Current）: 現在地のみ（ログ禁止）
- L2（Plan / Note）:
  - <topic>/<topic>_plan.md は必須
  - <topic>/<topic>_note.md は空でも可
- L3（Specification）: 契約・不変条件の正
- L4（Reference / History）: 参考・旧版・非正規

誤ったレイヤに書かないこと。

## 4. 計画ルール（重要）

非 trivial な実装/リファクタに着手する場合:

- 対応する L2 の <topic>_plan.md が存在すること。
- ad-hoc な説明を作らず、必ず plan を更新または参照する。

## 5. 迷った場合

迷ったら以下で判断する:
1. technical / education どちらか？
2. L0–L4 のどのレイヤか？
3. それでも曖昧なら書く前に質問する。

## 必須の認識確認ステップ

このファイルと権威ドキュメントを読んだ後は、
作業前に必ず一度応答して確認を行うこと。

最初の応答に含める内容:

1. 読了と理解の確認。
2. このリポジトリの概要（自分の言葉で簡潔に）。
3. ドキュメント構造（tech / education と L0–L4）。
4. docs/CURRENT.md に基づく現在地。
5. 次に取るべき一手（必要な場合のみ）。

確認が終わるまで実装・提案・修正作業を開始しないこと。
