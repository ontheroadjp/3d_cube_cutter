<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>立体切断シミュレーター v0.3</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<style>
html, body { margin:0; width:100%; height:100%; overflow:hidden; }
:root {
    --ui-bg: #ffffff;
    --ui-muted-bg: #f8f9fa;
    --ui-border: rgba(0,0,0,0.12);
    --ui-accent: #0d6efd;
    --ui-text: #212529;
}
#ui-container {
    position: absolute; top: 0; left: 0; width: 100%; z-index: 100;
}
#tooltip { position:absolute; display:none; background:rgba(0,0,0,0.7); color:white; padding:4px 8px; border-radius:4px; pointer-events:none; z-index:1020; }
.navbar {
    background: var(--ui-muted-bg) !important;
    border-bottom: 1px solid var(--ui-border);
}
#learning-panels {
    max-height: 35vh;
    overflow-y: auto;
    background: var(--ui-muted-bg);
}
#react-learning-header-root .container-fluid {
    background: var(--ui-bg);
    border-bottom: 1px solid var(--ui-border);
}
#preset-bar {
    background: var(--ui-bg);
    border-bottom: 1px solid var(--ui-border);
}
#preset-bar .d-flex {
    row-gap: 0.5rem;
}
#preset-bar .form-select {
    min-width: 140px;
}
#preset-bar .btn {
    min-width: 90px;
}
#settings-panels {
    background: var(--ui-muted-bg);
    border-bottom: 1px solid var(--ui-border);
}
</style>
</head>
<body>

<div id="ui-container">
  <!-- Navbar: Simplified to only show title and selection count -->
  <nav class="navbar navbar-light bg-light shadow-sm">
    <div class="container-fluid">
      <a class="navbar-brand" href="#">立体切断シミュレーター</a>
      <span class="navbar-text ms-auto">
        選択: <span id="count" class="badge bg-secondary">0</span> / 3
      </span>
    </div>
  </nav>

  <div id="react-learning-header-root"></div>

  <!-- Main Control Bar -->
  <div id="preset-bar" class="container-fluid py-2">
    <div id="react-topbar-root"></div>
  </div>

  <!-- Settings Panels (relocated from old menu, initially hidden) -->
  <div id="settings-panels" class="container-fluid p-3 bg-light border-bottom shadow-sm d-none">
    
    <div id="react-settings-root"></div>

    <!-- Cuboid Settings Panel (initially hidden) -->
    <div id="cuboid-settings-panel" class="d-none">
        <div id="react-cuboid-root"></div>
    </div>

    <!-- User Presets Panel (initially hidden) -->
    <div id="user-presets-panel" class="d-none">
        <div id="react-user-presets-root"></div>
    </div>
  </div>

  <div id="learning-panels" class="container-fluid p-3 bg-light border-bottom shadow-sm d-none">
    <div id="react-learning-root"></div>
  </div>

</div>

<div id="react-root"></div>

<div id="alert-container" style="position: fixed; top: 80px; left: 50%; transform: translateX(-50%); z-index: 2000; width: 80%; max-width: 600px; pointer-events: none;"></div>
<div id="tooltip"></div>

<!-- Bootstrap Bundle JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<script type="importmap">
  {
    "imports": {
      "three": "./lib/three/build/three.module.js",
      "three/addons/": "./lib/three/examples/jsm/",
      "three-mesh-bvh": "https://unpkg.com/three-mesh-bvh@0.7.3/build/index.module.js",
      "three-bvh-csg": "https://unpkg.com/three-bvh-csg@0.0.16/build/index.module.js",
      "react": "https://esm.sh/react@18",
      "react-dom/client": "https://esm.sh/react-dom@18/client"
    }
  }
</script>
<script type="module" src="./dist/main.js"></script>
</body>
</html>
